<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BuildAI Pro | Construction Planner</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f7fa; margin: 0; color: #333; }
        .navbar { background: #764ba2; color: white; padding: 1.2rem 5%; font-size: 1.5rem; font-weight: bold; }
        .container { max-width: 1200px; margin: 20px auto; padding: 20px; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .results-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; display: none; margin-top: 25px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h2 { color: #764ba2; font-size: 1.1rem; border-left: 4px solid #764ba2; padding-left: 10px; margin-top: 0; }
        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        label { font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 5px; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #764ba2; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .stat-line { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .badge { background: #667eea; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem; }
        #ai-loading-box { display: none; margin-top: 15px; padding: 15px; background: #fdf2ff; border-radius: 8px; border-left: 4px solid #764ba2; }
    </style>
</head>
<body>
    <div class="navbar">                         üèóÔ∏è BuildAI Pro <span style="font-size:0.8rem; font-weight:normal; margin-left:10px;">by Pavan</span></div>
    <div class="container">
        <div class="main-grid">
            <div class="card">
                <h2>üìã Project Details</h2>
                <div class="input-row">
                    <div><label>Area (Sq. Yards) *</label><input type="number" id="area" value="1000"></div>
                    <div><label>Floors (e.g. G+2) *</label><input type="text" id="floors" value="G+2"></div>
                </div>
                <div class="input-row">
                    <div><label>Daily Wage (‚Çπ) *</label><input type="number" id="wage" value="500"></div>
                    <div><label>Cost/Sq Yard (‚Çπ) *</label><input type="number" id="unit_cost" value="1500"></div>
                </div>
                <button onclick="calculate()">üöÄ Generate Analysis</button>
                <div id="ai-loading-box">
                    <strong>AI Strategic Analysis:</strong><br>
                    <span id="ai-content" style="font-style:italic; color:#764ba2;">AI is analyzing structural requirements...</span>
                </div>
            </div>

            <div class="card">
                <h2>üë§ Workers & Labor</h2>
                <div class="stat-line"><span>Total Man-Days</span><strong id="res-days">0</strong></div>
                <div style="margin-top: 10px;">
                    <div class="stat-line"><span>üë∑ Masons</span><span class="badge">2</span></div>
                    <div class="stat-line"><span>ü§ù Helpers</span><span class="badge">3</span></div>
                    <div class="stat-line"><span>‚öôÔ∏è Steel Workers</span><span class="badge">1</span></div>
                    <div class="stat-line"><span>üî® Carpenters</span><span class="badge">1</span></div>
                    <div class="stat-line"><span>üìã Supervisors</span><span class="badge">1</span></div>
                </div>
            </div>
        </div>

        <div id="results-row" class="results-row">
            <div class="card">
                <h2>üí∞ Cost Analysis</h2>
                <div class="stat-line"><span>Material Cost</span><strong id="c-material">‚Çπ0</strong></div>
                <div class="stat-line"><span>Labor Cost</span><strong id="c-labor">‚Çπ0</strong></div>
                <div class="stat-line"><span>Overhead (10%)</span><strong id="c-overhead">‚Çπ0</strong></div>
                <div class="stat-line" style="border-top:2px solid #764ba2; margin-top:5px;"><span>Total Estimate</span><strong id="c-total">‚Çπ0</strong></div>
            </div>
            <div class="card">
                <h2>üèóÔ∏è Materials Required</h2>
                <div class="stat-line"><span>Steel Required</span><strong id="m-steel">0</strong></div>
                <div class="stat-line"><span>Cement Bags</span><strong id="m-cement">0</strong></div>
                <div class="stat-line"><span>Sand Required</span><strong id="m-sand">0</strong></div>
                <div class="stat-line"><span>Water Supply</span><strong id="m-water">0</strong></div>
            </div>
        </div>
    </div>

    <script>
        async function calculate() {
            document.getElementById('ai-loading-box').style.display = 'block';
            document.getElementById('ai-content').innerText = "AI is generating strategic insights...";

            const response = await fetch('/api/calculate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    area: document.getElementById('area').value, 
                    floors: document.getElementById('floors').value,
                    wage: document.getElementById('wage').value,
                    unit_cost: document.getElementById('unit_cost').value
                })
            });
            
            const data = await response.json();
            document.getElementById('results-row').style.display = 'grid';
            
            document.getElementById('c-material').innerText = data.material_cost;
            document.getElementById('c-labor').innerText = data.labor_cost;
            document.getElementById('c-overhead').innerText = data.overhead;
            document.getElementById('c-total').innerText = data.total_estimate;
            document.getElementById('m-steel').innerText = data.steel;
            document.getElementById('m-cement').innerText = data.cement;
            document.getElementById('m-sand').innerText = data.sand;
            document.getElementById('m-water').innerText = data.water;
            document.getElementById('res-days').innerText = data.days;
            
            document.getElementById('ai-content').style.fontStyle = 'normal';
            document.getElementById('ai-content').innerText = data.ai_insight;

            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>