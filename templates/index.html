<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildAI Pro | Construction Planning</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #f4f7f6; margin: 0; }
        .navbar { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.2rem; text-align: center; font-weight: bold; font-size: 1.8rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .container { display: flex; gap: 20px; padding: 40px; max-width: 1200px; margin: auto; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); flex: 1; transition: transform 0.3s; }
        .card:hover { transform: translateY(-5px); }
        h2 { color: #764ba2; border-bottom: 2px solid #eef2ff; padding-bottom: 12px; margin-top: 0; }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        button { width: 100%; padding: 15px; background: #764ba2; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1rem; font-weight: bold; }
        button:hover { background: #667eea; }
        #results { margin-top: 20px; padding: 20px; background: #f8faff; border-left: 5px solid #764ba2; border-radius: 4px; display: none; }
        .res-item { margin-bottom: 10px; font-size: 1.1rem; }
        hr { border: 0; height: 1px; background: #eee; margin: 20px 0; }
        #placeholder { color: #888; text-align: center; margin-top: 50px; font-style: italic; }
    </style>
</head>
<body>
    <div class="navbar">BuildAI Pro</div>
    <div class="container">
        <div class="card">
            <h2>Project Details</h2>
            <div class="input-group">
                <label>Built-up Area (Sq. Yards)</label>
                <input type="number" id="area" placeholder="e.g. 1000">
            </div>
            <div class="input-group">
                <label>Floors (e.g. G+2, G+3)</label>
                <input type="text" id="floors" placeholder="e.g. G+2">
            </div>
            <button onclick="calculate()">Calculate Project</button>
        </div>

        <div class="card">
            <h2>Results & AI Insight</h2>
            <div id="results">
                <div class="res-item"><strong>Steel Required:</strong> <span id="res-steel" style="color:#764ba2"></span></div>
                <div class="res-item"><strong>Cement Bags:</strong> <span id="res-cement" style="color:#764ba2"></span></div>
                <hr>
                <p><strong>AI Construction Tip:</strong></p>
                <p id="res-ai" style="font-style: italic; color: #555; line-height: 1.5;"></p>
            </div>
            <p id="placeholder">Enter project details and click calculate to generate your AI-powered plan.</p>
        </div>
    </div>

    <script>
        async function calculate() {
    const area = document.getElementById('area').value;
    const floors = document.getElementById('floors').value;
    if(!area) return alert("Please enter the area!");

    // 1. Show the result box and a "loading" state for AI
    document.getElementById('placeholder').style.display = 'none';
    document.getElementById('results').style.display = 'block';
    document.getElementById('res-ai').innerText = "AI is thinking...";

    // 2. Fetch data from backend
    const response = await fetch('/api/calculate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ built_up_area: area, floors: floors })
    });
    
    const data = await response.json();

    // 3. Update the numbers IMMEDIATELY (these don't need AI)
    document.getElementById('res-steel').innerText = data.steel;
    document.getElementById('res-cement').innerText = data.cement;

    // 4. Update the AI tip once it's done
    document.getElementById('res-ai').innerText = data.ai_insight;
}
    </script>
</body>
</html>